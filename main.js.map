{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/widget.js","webpack:///./src/js/validators.js","webpack:///./src/js/app.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","CardFormWidget","constructor","parentEl","this","onSubmit","onInput","onFocus","bindToDOM","innerHTML","markup","element","querySelector","selector","submit","submitSelector","input","inputSelector","allCards","querySelectorAll","allCardsSelector","mirCard","mirCardSelector","masterCard","masterCardSelector","visaCard","visaCardSelector","addEventListener","e","preventDefault","cardNo","nSum","isSecond","length","charCodeAt","parseInt","luhnCheck","classList","add","remove","cardType","firstNumb","substr","twoNumb","result","getTypeCardByNumber","forEach","container","document"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","import { getTypeCardByNumber, luhnCheck } from './validators';\n\nexport default class CardFormWidget {\n  constructor(parentEl) {\n    this.parentEl = parentEl;\n\n    this.onSubmit = this.onSubmit.bind(this);\n    this.onInput = this.onInput.bind(this);\n    this.onFocus = this.onFocus.bind(this);\n  }\n\n  static get markup() {\n    return `\n        <form class=\"cardnumb-form-widget\">\n          <div class=\"control\">\n            <ul class=\"cards\">\n                <li><span class=\"card mir\" title=\"Mir\">Visa</span></li>\n                <li><span class=\"card visa\" title=\"Visa\">Visa</span></li>\n                <li><span class=\"card master\" title=\"Mastercard\">Mastercard</span></li>\n                <li><span class=\"card amex\" title=\"American Express\">American Express</span></li>\n                <li><span class=\"card discover\" title=\"Discover\">Discover</span></li>\n                <li><span class=\"card jcb\" title=\"JCB\">JCB</span></li>\n                <li><span class=\"card diners_club\" title=\"Diners Club\">Diners Club</span></li>\n            </ul>\n            <input type=\"text\" id=\"cardnumb-input\" class=\"input\" autocomplete=\"off\">\n            <button class=\"submit\">Click to validate </button>\n            \n          </div>\n        </form>\n        `;\n  }\n\n  static get submitSelector() {\n    return '.submit';\n  }\n\n  static get inputSelector() {\n    return '.input';\n  }\n\n  static get selector() {\n    return '.cardnumb-form-widget';\n  }\n\n  static get allCardsSelector() {\n    return '.card';\n  }\n\n  static get mirCardSelector() {\n    return '.card.mir';\n  }\n\n  static get masterCardSelector() {\n    return '.card.master';\n  }\n\n  static get visaCardSelector() {\n    return '.card.visa';\n  }\n\n  bindToDOM() {\n    this.parentEl.innerHTML = CardFormWidget.markup;\n\n    this.element = this.parentEl.querySelector(CardFormWidget.selector);\n    this.submit = this.element.querySelector(CardFormWidget.submitSelector);\n    this.input = this.element.querySelector(CardFormWidget.inputSelector);\n    this.allCards = this.element.querySelectorAll(CardFormWidget.allCardsSelector);\n\n    this.mirCard = this.element.querySelector(CardFormWidget.mirCardSelector);\n    this.masterCard = this.element.querySelector(CardFormWidget.masterCardSelector);\n    this.visaCard = this.element.querySelector(CardFormWidget.visaCardSelector);\n\n    this.element.addEventListener('submit', this.onSubmit);\n    this.input.addEventListener('input', this.onInput);\n    this.input.addEventListener('input', this.onFocus);\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n\n    const { value } = this.input;\n\n    if (luhnCheck(value)) {\n      this.input.classList.add('valid');\n      this.input.classList.remove('invalid');\n    } else {\n      this.input.classList.add('invalid');\n      this.input.classList.remove('valid');\n    }\n  }\n\n  onInput() {\n    const cardType = getTypeCardByNumber(this.input.value);\n    this.allCards.forEach((element) => {\n      element.classList.remove('active');\n    });\n    if (cardType) {\n      this.element.querySelector(`${CardFormWidget.allCardsSelector}.${cardType}`).classList.add('active');\n    }\n  }\n\n  onFocus() {\n    this.input.classList.remove('valid');\n    this.input.classList.remove('invalid');\n  }\n}\n","export const luhnCheck = (cardNo) => {\n  const nDigits = cardNo.length;\n\n  let nSum = 0;\n  let isSecond = false;\n  for (let i = nDigits - 1; i >= 0; i -= 1) {\n    let d = cardNo[i].charCodeAt() - '0'.charCodeAt();\n\n    if (isSecond === true) d *= 2;\n\n    nSum += parseInt(d / 10, 10);\n    nSum += d % 10;\n\n    isSecond = !isSecond;\n  }\n  return (nSum % 10 === 0);\n};\n\nexport function getTypeCardByNumber(value) {\n  const firstNumb = value.substr(0, 1);\n  const twoNumb = value.substr(0, 2);\n  let result = '';\n\n  //  Мир: 2\n  if (firstNumb === '2') { result = 'mir'; }\n  // VISA: 4\n  if (firstNumb === '4') { result = 'visa'; }\n  // MasterCard: 5\n  if (firstNumb === '5') { result = 'master'; }\n\n  // Amex: 34 || 37\n  if (twoNumb === '34' || twoNumb === '37') { result = 'amex'; }\n\n  // Discover:  6011, 644–649 или 65\n  if (value.substr(0, 4) === '6011' || value.substr(0, 7) === '644–649' || twoNumb === '65') { result = 'discover'; }\n\n  // JSB: 3528, 3539, 3545, 3532, 3589\n\n  if (value.substr(0, 4) === '3528'\n      || value.substr(0, 4) === '3539'\n      || value.substr(0, 4) === '3545'\n      || value.substr(0, 4) === '3532'\n      || value.substr(0, 4) === '3589'\n  ) { result = 'jcb'; }\n\n  // Dinners club 300–305, 36, 38 или 39\n  if (value.substr(0, 7) === '300–305' || twoNumb === '36' || twoNumb === '38' || twoNumb === '39') { result = 'diners_club'; }\n\n  return result;\n}\n","import CardFormWidget from './widget';\n\nconst container = document.querySelector('.container');\nconst form = new CardFormWidget(container);\n\nform.bindToDOM();\n"],"sourceRoot":""}